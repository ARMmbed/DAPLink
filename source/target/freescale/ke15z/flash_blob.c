/* Flash OS Routines (Automagically Generated)
 * Copyright (c) 2009-2015 ARM Limited
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
 // Device: ke15z
 
 #include "flash_blob.h"

static const uint32_t _flash_prog_blob[] = {
    0xE00ABE00, 0x062D780D, 0x24084068, 0xD3000040, 0x1E644058, 0x1C49D1FA, 0x2A001E52, 0x4770D1F2,
    0xb5104948, 0x60084449, 0x21ff4846, 0x1d004448, 0x70417001, 0x70c17081, 0x710222fe, 0x7142223f,
    0x71c17181, 0x78414840, 0x0f890649, 0xd1062902, 0x229f7841, 0x70414011, 0x290178c1, 0x483cd1fc,
    0x6041493a, 0x6081493b, 0x6001493b, 0x493b483c, 0x60014448, 0x04922201, 0x21006082, 0x02926041,
    0x131260c2, 0x22056102, 0x61420692, 0x03d22201, 0x77016182, 0x62011e49, 0xf9d9f000, 0xd0002800,
    0xbd102001, 0x47702000, 0xb5084a2e, 0x0349447a, 0x0c0a9200, 0x482a4601, 0x44482300, 0xfbb0f000,
    0xd0002800, 0xbd082001, 0x4926b508, 0x48244479, 0x44483920, 0xf93cf000, 0xd10f2800, 0x44784821,
    0x4b183832, 0x481e9000, 0x2181444b, 0x22081d1b, 0x444800c9, 0xfa39f000, 0xd0002800, 0xbd082001,
    0x4b18b510, 0x4601447b, 0x22014815, 0x02d23b58, 0xf0004448, 0x2800f940, 0x2001d000, 0xb508bd10,
    0x1dc94613, 0x490f08ca, 0x447900d2, 0x9100397e, 0x480b4601, 0xf0004448, 0x2800fa18, 0x2001d000,
    0x0000bd08, 0x00000004, 0x4007e000, 0xd928c520, 0x40052000, 0x0000ffff, 0x00002020, 0x40020000,
    0x00000010, 0x00000277, 0x6804b430, 0x70252531, 0x25806804, 0x680471e5, 0x680172e1, 0xbc30728a,
    0x46024718, 0x20006913, 0xd0032b00, 0x7dd26812, 0x4770700a, 0x02802001, 0x46024770, 0x20006913,
    0xd0072b00, 0x75d16812, 0x428a7dd2, 0x20ffd001, 0x47703001, 0x02802001, 0xb5104770, 0x2a019a02,
    0x2a02d004, 0x2a04d007, 0xe019d00d, 0x7812681a, 0x700a6809, 0x681ae014, 0x78127853, 0x6809021b,
    0x800a431a, 0x681ae00c, 0x061c78d3, 0x041b7893, 0x78544323, 0x02247812, 0x6809431c, 0x600a4322,
    0x1c506802, 0x07c97801, 0x7810d0fc, 0x40082110, 0xb53fbd10, 0x682a4605, 0x9902b081, 0x20007852,
    0xd03007d2, 0x428a696a, 0x69abd805, 0x9b0318d2, 0x428a18c9, 0x2001d220, 0xe01d0300, 0x07829802,
    0x2904d103, 0x2404d301, 0x07c0e006, 0x2902d103, 0x2402d301, 0x2401e000, 0xaa03ab04, 0x4628a902,
    0xf7ff9400, 0x9902ffaa, 0x91021909, 0x1b099903, 0x99049103, 0x91041909, 0x29009903, 0x2800d001,
    0xb005d0dc, 0x2001bd30, 0xe7fa0240, 0x68124602, 0x78532000, 0xd00207db, 0x700a7d92, 0x20014770,
    0x47700240, 0x4603b510, 0x2000681a, 0x07e47854, 0x7591d007, 0x7d92681a, 0xd001428a, 0x300120ff,
    0x2001bd10, 0xbd100240, 0x4606b5f8, 0x46152000, 0x460c9000, 0x19496872, 0x42a2461f, 0x68b3d803,
    0x428a18d2, 0x68f2d20a, 0xd80342a2, 0x18d26933, 0xd203428a, 0x03092101, 0x91002500, 0x60392100,
    0x7821e00d, 0x1c40683a, 0x1c641851, 0x60391e6d, 0xd304280a, 0x1c416a30, 0x4780d000, 0x2d002000,
    0x9800d1ef, 0xb570bdf8, 0x68004604, 0x22807801, 0x70014311, 0xe0036825, 0x1c486a21, 0x4788d000,
    0x06007828, 0x6820d5f8, 0x21317800, 0xbd704008, 0x23316802, 0x68027013, 0x71d32344, 0x68024708,
    0x70132331, 0x23496802, 0x470871d3, 0x6802b510, 0x78532100, 0xd50c06db, 0x24807813, 0x70134323,
    0xe0016800, 0xb2891c49, 0x06127802, 0x2920d5fa, 0x2000d8f8, 0xb5ffbd10, 0x4605460c, 0x200068e9,
    0x4616b081, 0xd309428c, 0x1852692a, 0xd90542a2, 0x1a612201, 0x188c05d2, 0xe00c1317, 0x428c6869,
    0x68aad307, 0x42a21852, 0x1a64d903, 0x033f2701, 0x2020e001, 0x1e792600, 0xd015420e, 0x03402001,
    0x6828e012, 0x70012131, 0x21096828, 0x682871c1, 0x71810c21, 0x0a216828, 0x68287141, 0x99047104,
    0x47884628, 0x19e41bf6, 0xd0012e00, 0xd0e82800, 0xbdf0b005, 0x780a6801, 0xd4070612, 0x2310784a,
    0x704a431a, 0x78016800, 0xd5fc0609, 0x47702000, 0x78806800, 0x0f920782, 0xd0062a02, 0x28020980,
    0x2004d000, 0x20007008, 0x20014770, 0xb5f0e7fa, 0x22316801, 0x6801700a, 0x71ca2203, 0x25806801,
    0x6801718d, 0x6801714a, 0x710a22f8, 0x24006801, 0x680172cc, 0x432a780a, 0x6801700a, 0x780a460b,
    0xd5fc0612, 0x7b197b5e, 0x070a2300, 0x26010731, 0x0f090f12, 0x43db0436, 0xd0292a00, 0xd0252a01,
    0xd0232a02, 0x2a031077, 0x2a04d01e, 0x2a05d016, 0x2a06d01c, 0x2a07d01a, 0x2a08d018, 0x2a09d00e,
    0x2a0ad014, 0x2a0bd00c, 0x2a0cd00e, 0x2a0dd010, 0x2a0ed00c, 0x2a0fd00a, 0xe00ad00a, 0xe0086104,
    0x03922201, 0xe0046102, 0xe0026107, 0xe0006103, 0x29006106, 0x2901d034, 0x2902d032, 0x2903d01a,
    0x2904d01b, 0x2905d01c, 0x2906d01d, 0x2907d01e, 0x2908d01f, 0x2909d01f, 0x290ad01f, 0x290bd020,
    0x290cd01e, 0x290dd01c, 0x290ed01a, 0x290fd018, 0xe018d018, 0x03092101, 0x2101e010, 0xe00d02c9,
    0x02892101, 0x2101e00a, 0xe0070249, 0x310121ff, 0x6185e004, 0x2140e007, 0x2120e000, 0xe0026181,
    0xe0006183, 0x20006184, 0xb5f8bdf0, 0x460c4605, 0x461f2000, 0x07514616, 0x2001d002, 0xbdf80340,
    0x428c68e9, 0x692ad308, 0x42a21852, 0x2201d904, 0x05d21a61, 0xe029188c, 0x428c6869, 0x68aad305,
    0x42a21852, 0x1a64d901, 0x2020e020, 0x6828e01e, 0x70012131, 0x21076828, 0x682871c1, 0x71810c21,
    0x0a216828, 0x68287141, 0x20007104, 0x682a4601, 0x18513108, 0x700a5c3a, 0xb2c01c40, 0xd3f52808,
    0x46289906, 0x34084788, 0x37083e08, 0xd0c62e00, 0xd0dc2800, 0xb5ffbdf8, 0xb0814617, 0x07924604,
    0x2001d003, 0xb0050340, 0x68e6bdf0, 0xd30842b1, 0x19926922, 0xd904428a, 0x21011b8a, 0x185505c9,
    0x6866e03c, 0xd30542b1, 0x199268a2, 0xd901428a, 0xe0331b8d, 0xe7e62020, 0x21316820, 0x68207001,
    0x71c12102, 0x0c296820, 0x68207181, 0x71410a29, 0x71056820, 0x990b6820, 0x200072c1, 0x68224601,
    0x1851310c, 0x5c129a04, 0x1c40700a, 0x2804b2c0, 0x990cd3f4, 0x47884620, 0xd00a2800, 0x05c92101,
    0xd302428d, 0x1a5219aa, 0x19aae000, 0x2704990a, 0x9904600a, 0x1d091d2d, 0x91041f3f, 0xd1cb2f00,
    0xb430e7b1, 0x25316804, 0x68047025, 0x71e52543, 0x71a16804, 0x460c2100, 0x34086805, 0x5c55192c,
    0x1c497025, 0x2908b2c9, 0xbc30d3f5, 0xb4f04718, 0x786c6805, 0xd40307a4, 0x02c02001, 0x4770bcf0,
    0x42a168c4, 0x6906d308, 0x428e1936, 0x1b09d904, 0x05e42401, 0xe0071909, 0x42a16844, 0x6886d318,
    0x428e1936, 0x1b09d914, 0x702c2431, 0x250b6804, 0x680471e5, 0x71a50c0d, 0x0a0d6804, 0x68047165,
    0x68017121, 0x72cc0a14, 0x728a6801, 0x4718bcf0, 0xe7d32020, 0x4604b570, 0x68004615, 0x70022231,
    0x22416820, 0x682071c2, 0x46207181, 0x00024798, 0x2100d10a, 0x68234608, 0x18183008, 0x54687800,
    0xb2c91c49, 0xd3f52908, 0xbd704610, 0x4604b570, 0x68c04615, 0x42819a04, 0x6926d308, 0x428e1836,
    0x1a08d904, 0x05c92101, 0xe0071840, 0x42816860, 0x68a6d319, 0x428e1836, 0x1a08d915, 0x26316821,
    0x6821700e, 0x71ce2603, 0x0c066821, 0x6821718e, 0x714e0a06, 0x71086821, 0x72c36820, 0x47904620,
    0xd0021e01, 0x2120e00b, 0x4602e009, 0x32086823, 0x7812189a, 0x1c40542a, 0x2808b2c0, 0x4608d3f5,
    0xb430bd70, 0x24316803, 0x6803701c, 0x71dc2445, 0x461c2300, 0x34086805, 0x5ccd192c, 0x1c5b7025,
    0x2b08b2db, 0xbc30d3f5, 0xb4304710, 0x24316803, 0x6803701c, 0x71dc2440, 0x71996803, 0x4710bc30,
    0x68c4b4f0, 0x42a19d04, 0x6906d308, 0x428e1936, 0x1b09d904, 0x05e42401, 0xe0071909, 0x42a16844,
    0x6886d31c, 0x428e1936, 0x1b09d918, 0x26316804, 0x68047026, 0x71e62601, 0x0c0e6804, 0x680471a6,
    0x71660a0e, 0x71216804, 0x0a146801, 0x680172cc, 0x6801728a, 0x46ac724b, 0x4760bcf0, 0x2020bcf0,
    0xb5104770, 0x7cc36800, 0x7c427c84, 0x061b7c00, 0x43230424, 0x43130212, 0x20004303, 0xbd10600b,
    0x020ab5f0, 0x0e130e0c, 0x6806040a, 0x0e122500, 0x74f4b2c9, 0x68067cf7, 0x7cb674b3, 0x680646b4,
    0x7c767472, 0x74016800, 0x42a77c00, 0x459cd105, 0x4296d103, 0x4288d101, 0x25ffd001, 0x46283501,
    0xb430bdf0, 0x24316803, 0x6803701c, 0x71dc2481, 0x71996803, 0x4710bc30, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000
};

/**
* List of start and size for each size of flash sector - even indexes are start, odd are size
* The size will apply to all sectors between the listed address and the next address
* in the list.
* The last pair in the list will have sectors starting at that address and ending
* at address flash_start + flash_size.
*/
static const sector_info_t sectors_info[] = {
    {0x10000000, 0x00000800},
};

static const program_target_t flash = {
    0x1fffe021, // Init
    0x1fffe0a5, // UnInit
    0x1fffe0c9, // EraseChip
    0x1fffe101, // EraseSector
    0x1fffe11f, // ProgramPage

    // BKPT : start of blob + 1
    // RSB  : blob start + header + rw data offset
    // RSP  : stack pointer
    {
        0x1fffe001,
        0x1fffe8f8,
        0x1fffe800
    },

    0x1fffe000 + 0x00000A00,  // mem buffer location
    0x1fffe000,               // location to write prog_blob in target RAM
    sizeof(_flash_prog_blob),   // prog_blob size
    _flash_prog_blob,           // address of prog_blob
    0x00000200       // ram_to_flash_bytes_to_be_written
};
