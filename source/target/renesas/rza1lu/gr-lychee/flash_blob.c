/**
 * @file    flash_blob.c
 * @brief   Flash algorithm for the GR-LYCHEE
 *
 * DAPLink Interface Firmware
 * Copyright (c) 2009-2016, ARM Limited, All Rights Reserved
 * SPDX-License-Identifier: Apache-2.0
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may
 * not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#include "flash_blob.h"

#define RAM_START    0x20020000

static const uint32_t GR_LYCHEE_FLM[] = {
    0xE1200070, 0x062D780D, 0x24084068, 0xD3000040, 0x1E644058, 0x1C49D1FA, 0x2A001E52, 0x4770D1F2,
    0xe59f1088, 0xe3a00000, 0xe92d4010, 0xe3e02000, 0xe4812004, 0xe2800001, 0xe3500010, 0xbafffffb, 
    0xeb00001b, 0xeb0001e4, 0xe3a00001, 0xeb0001f9, 0xeb00003d, 0xe3500000, 0x13e00000, 0xe8bd8010, 
    0xe92d4010, 0xeb00001f, 0xe3500000, 0x13e00000, 0xe8bd8010, 0xe92d4010, 0xeb00020d, 0xe3a00000, 
    0xe8bd8010, 0xe92d4010, 0xeb000219, 0xe3a00000, 0xe8bd8010, 0xe1a03002, 0xe1a02001, 0xe92d4010, 
    0xe1a01003, 0xeb000226, 0xe3a00000, 0xe8bd8010, 0xe8201180, 0xe59f0024, 0xe3a01001, 0xe5801000, 
    0xe5900000, 0xe3010035, 0xe59f1014, 0xe1c101b0, 0xe2811b01, 0xe3a0000f, 0xe1c100b8, 0xe12fff1e, 
    0x3fffff80, 0xfcfe0000, 0xe59f0570, 0xe5901000, 0xe3110102, 0x0a000012, 0xe5901048, 0xe3110002, 
    0x13e00000, 0x112fff1e, 0xe5901000, 0xe3c11102, 0xe5801000, 0xe3a01000, 0xe580100c, 0xe5901010, 
    0xe3c118ff, 0xe38118eb, 0xe5801010, 0xe5901014, 0xe3c11003, 0xe3811001, 0xe5801014, 0xe59f1520, 
    0xe580101c, 0xe3a00000, 0xe12fff1e, 0xe59f050c, 0xe5901000, 0xe3110102, 0x0a000001, 0xe3a00000, 
    0xe12fff1e, 0xe5901048, 0xe3110002, 0x05901000, 0x13e00000, 0x03811102, 0x05801000, 0x0afffff6, 
    0xe12fff1e, 0xe59f14d4, 0xe5912048, 0xe3120002, 0x13a00001, 0x112fff1e, 0xe5912000, 0xe2022003, 
    0xe1520000, 0x0a000005, 0xe5910000, 0xe3c00003, 0xe5810000, 0xe591000c, 0xe3800c02, 0xe581000c, 
    0xe3a00000, 0xe12fff1e, 0xe59f0490, 0xe5900000, 0xe2000003, 0xe12fff1e, 0xe59f0488, 0xe5d01000, 
    0xe3c11008, 0xe5c01000, 0xe59f0470, 0xe590100c, 0xe3c11001, 0xe580100c, 0xe5901048, 0xe3110002, 
    0x1afffffc, 0xe5901000, 0xe3c11003, 0xe5801000, 0xe59f1454, 0xe1d121b0, 0xe38220fc, 0xe1c121b0, 
    0xe2411c3f, 0xe1d121b0, 0xe3c220fc, 0xe1c121b0, 0xe2811c02, 0xe1d121b0, 0xe38220fc, 0xe1c121b0, 
    0xe2811c01, 0xe1d121b0, 0xe3c220fc, 0xe1c121b0, 0xe2811b01, 0xe1d121b0, 0xe3c220fc, 0xe1c121b0, 
    0xe2411c06, 0xe1d121b0, 0xe38220fc, 0xe1c121b0, 0xe5901048, 0xe3110002, 0x13a00001, 0x112fff1e, 
    0xe5901000, 0xe38118ff, 0xe3811cf3, 0xe5801000, 0xe5901000, 0xe3c11078, 0xe3811020, 0xe5801000, 
    0xe5901004, 0xe59f23c4, 0xe0011002, 0xe5801004, 0xe590105c, 0xe3002111, 0xe1c11002, 0xe580105c, 
    0xe5901008, 0xe30f2f03, 0xe1c11002, 0xe3811c02, 0xe5801008, 0xe3a00000, 0xe12fff1e, 0xe92d4038, 
    0xe59f3378, 0xe5931000, 0xe5932000, 0xe2011003, 0xe3120102, 0x0a000064, 0xe5932048, 0xe3120001, 
    0x0a000067, 0xe5932064, 0xe3004111, 0xe1c22004, 0xe5832064, 0xe5932030, 0xe1d040b0, 0xe3c22901, 
    0xe7e04554, 0xe1822704, 0xe5832030, 0xe1d020b0, 0xe3120b01, 0x0a000008, 0xe5932024, 0xe5d04004, 
    0xe3c228ff, 0xe1822804, 0xe5832024, 0xe5d02000, 0xe5934030, 0xe7df4f12, 0xe5834030, 0xe5932030, 
    0xe1d040b0, 0xe3c22a01, 0xe7e045d4, 0xe1822604, 0xe5832030, 0xe1d020b0, 0xe3120b02, 0x0a00000a, 
    0xe5932024, 0xe5d04005, 0xe3c220ff, 0xe1822004, 0xe5832024, 0xe5932030, 0xe5d04000, 0xe3c22203, 
    0xe7e14154, 0xe1822e04, 0xe5832030, 0xe5932030, 0xe1d040b0, 0xe3c22c0f, 0xe7e34654, 0xe1822404, 
    0xe5832030, 0xe1d020b0, 0xe3120a0f, 0x0a000007, 0xe5902008, 0xe5832028, 0xe5932030, 0xe5d04000, 
    0xe3c22403, 0xe7e14254, 0xe1822c04, 0xe5832030, 0xe5932030, 0xe5904000, 0xe3c220f0, 0xe7e34854, 
    0xe1822204, 0xe5832030, 0xe5902000, 0xe312080f, 0x0a00000b, 0xe590200c, 0xe5d0400f, 0xe6bf2f32, 
    0xe3c220ff, 0xe1822004, 0xe583202c, 0xe5932030, 0xe5d04000, 0xe3c22603, 0xe7e14354, 0xe1822a04, 
    0xe5832030, 0xe5932030, 0xe5904000, 0xe3c2200f, 0xe7e34a54, 0xe1822004, 0xe5832030, 0xe5902000, 
    0xe312060f, 0x0a000033, 0xe3510000, 0x0a00000e, 0xe3510001, 0x0a000017, 0xe3510000, 0x0a000011, 
    0xe3510001, 0x0a000016, 0xea000024, 0xe5932048, 0xe3120002, 0x05932000, 0x03822102, 0x05832000, 
    0x0affff94, 0xe3a00001, 0xe8bd8038, 0xe7e34a52, 0xe3540008, 0x05d02018, 0x05c32040, 0x0a000017, 
    0xe354000c, 0x0a00000c, 0xe7e32a52, 0xe352000f, 0x0a00000b, 0xea000011, 0xe7e34a52, 0xe3540008, 
    0x0a000005, 0xe7e32a52, 0xe352000c, 0x0a000004, 0xe352000f, 0x0a000005, 0xea000008, 0xe1d021b8, 
    0xea000000, 0xe5902018, 0xe5832040, 0xea000003, 0xe590201c, 0xe5832040, 0xe5902018, 0xe5832044, 
    0xe5932030, 0xe1d040b0, 0xe3c22803, 0xe7e14454, 0xe1822804, 0xe5832030, 0xe5932020, 0xe5904000, 
    0xe3c22c01, 0xe7e04c54, 0xe1822404, 0xe5832020, 0xe5902000, 0xe3120c03, 0x1312060f, 0x0a000002, 
    0xe3120402, 0x13120301, 0x1affffcd, 0xe5934020, 0xe7e05cd2, 0xe3c44007, 0xe7e02d52, 0xe1844105, 
    0xe1842082, 0xe3822001, 0xe5832020, 0xe5932048, 0xe5932048, 0xe5932048, 0xe5932048, 0xe58d2000, 
    0xe5932048, 0xe3120001, 0x0afffffc, 0xe3510000, 0x0a000006, 0xe3510001, 0x0a000011, 0xe3510000, 
    0x0a00000a, 0xe3510001, 0x0a000011, 0xea000021, 0xe5901000, 0xe7e31a51, 0xe3510008, 0x05d31038, 
    0x05c01010, 0x0a00001b, 0xe351000c, 0x0a00000f, 0xe5901000, 0xe7e31a51, 0xe351000f, 0x1a000015, 
    0xea00000d, 0xe5901000, 0xe7e31a51, 0xe3510008, 0x0a000006, 0xe5901000, 0xe7e31a51, 0xe351000c, 
    0x0a000005, 0xe351000f, 0x0a000006, 0xea000009, 0xe1d313b8, 0xe1c011b0, 0xea000006, 0xe5931038, 
    0xe5801010, 0xea000003, 0xe593103c, 0xe5801010, 0xe5931038, 0xe5801014, 0xe3a00000, 0xe8bd8038, 
    0x3fefa000, 0x02224f80, 0xfcfe0438, 0xfcfe7200, 0xfffcfcfc, 0xe92d4070, 0xe1a06000, 0xe59f4514, 
    0xe1a05001, 0xe0844009, 0xe5940000, 0xe3c00003, 0xe3c008ff, 0xe3c00cfb, 0xe3800b01, 0xe2802502, 
    0xe3c22401, 0xe3820406, 0xe3a02000, 0xe5840000, 0xe3a00005, 0xe5c40004, 0xe2840000, 0xe5842018, 
    0xe584201c, 0xe5842010, 0xe5842014, 0xebffff02, 0xe5d40010, 0xe5c60000, 0xe5d40011, 0xe5c50000, 
    0xe8bd8070, 0xe59f04ac, 0xe0800009, 0xe5901000, 0xe3c11003, 0xe3c117ff, 0xe3c11bfe, 0xe3c11301, 
    0xe3811b01, 0xe5801000, 0xe3a01006, 0xe5c01004, 0xeafffef1, 0xe92d4070, 0xe1a04001, 0xe1a05000, 
    0xebffffef, 0xe59f246c, 0xe0822009, 0xe5920000, 0xe3c000c3, 0xe3c00703, 0xe3c00bfe, 0xe3800b01, 
    0xe2803703, 0xe3c3067f, 0xe5820000, 0xe3a00001, 0xe5c20004, 0xe2820000, 0xe5c2500c, 0xe5c2400d, 
    0xebfffedd, 0xe8bd4070, 0xea0000ce, 0xe92d4070, 0xe1a06000, 0xe59f441c, 0xe1a05001, 0xe0844009, 
    0xe5940000, 0xe3c00003, 0xe3c008ff, 0xe3c00cfb, 0xe3800b01, 0xe2802502, 0xe3c22401, 0xe3820406, 
    0xe3a02000, 0xe5840000, 0xe3a00035, 0xe5c40004, 0xe2840000, 0xe5842018, 0xe584201c, 0xe5842010, 
    0xe5842014, 0xebfffec4, 0xe5d40010, 0xe5c60000, 0xe5d40011, 0xe5c50000, 0xe8bd8070, 0xe92d401f, 
    0xebfffe7c, 0xe3a00000, 0xebfffe65, 0xe3a00000, 0xe28d1004, 0xe5cd0000, 0xe5cd0004, 0xe5cd0008, 
    0xe5cd000c, 0xe1a0000d, 0xebffff99, 0xe28d100c, 0xe28d0008, 0xebffffd4, 0xe5dd0008, 0xe5dd100c, 
    0xe1800001, 0xe3c00039, 0xe3801002, 0xe5dd0000, 0xebffffb7, 0xe8bd801f, 0xe92d401f, 0xe3a01000, 
    0xe1a04000, 0xe1a0000d, 0xe5cd1000, 0xe5cd1004, 0xe5cd1008, 0xe5cd100c, 0xe28d1004, 0xebffff84, 
    0xe28d100c, 0xe28d0008, 0xebffffbf, 0xe5dd1000, 0xe3540001, 0x03c1001c, 0x1381001c, 0xe5cd0000, 
    0xe5dd0008, 0xe3c01039, 0xe5dd0000, 0xe5cd1008, 0xebffff9f, 0xe28d100c, 0xe28d0008, 0xeb0000a1, 
    0xe5dd0008, 0xe3c00004, 0xe5cd0008, 0xeb000089, 0xe8bd801f, 0xe92d4010, 0xebffff89, 0xe59f02d4, 
    0xe0800009, 0xe5901000, 0xe3c11003, 0xe3c117ff, 0xe3c11bfe, 0xe3c11301, 0xe3811b01, 0xe5801000, 
    0xe3a010c7, 0xe5c01004, 0xebfffe7b, 0xe8bd4010, 0xea00006c, 0xe92d4010, 0xe1a04000, 0xebffff78, 
    0xe59f1290, 0xe0811009, 0xe5910000, 0xe3c00033, 0xe3c00b3e, 0xe3800b01, 0xe2802a07, 0xe3c20407, 
    0xe3c008ff, 0xe5810000, 0xe3a000d8, 0xe5c10004, 0xe2810000, 0xe5814008, 0xebfffe67, 0xe8bd4010, 
    0xea000058, 0xe92d41f0, 0xe1a05002, 0xe1a04001, 0xe1a06000, 0xebffff62, 0xeb000052, 0xebfffe19, 
    0xe59f8230, 0xe3500001, 0x03a07001, 0x13a07000, 0xe0888009, 0xe5980000, 0xe3c00033, 0xe3c00b3e, 
    0xe3800b01, 0xe2800a07, 0xe3c01406, 0xe3c118ff, 0xe3810401, 0xe5880000, 0xe3a00032, 0xe5c80004, 
    0xe1a00736, 0xe5880008, 0xe2880000, 0xebfffe4a, 0xe5980000, 0xe3a01004, 0xe1a06711, 0xe3c00c03, 
    0xe2461001, 0xe2800c02, 0xe1110005, 0xe3c00783, 0xe3c00bff, 0xe3800301, 0xe5880000, 0x0380060f, 
    0x0a00000d, 0xe3a01002, 0xe1a06711, 0xe2462001, 0xe1120005, 0x03c0060f, 0x02800503, 0x0a000006, 
    0xe3a01001, 0xe1a06711, 0xe2462001, 0xe1120005, 0x03c0060f, 0x02800502, 0x18bd81f0, 0xe5880000, 
    0xea00001c, 0xe3a00000, 0xe1a01736, 0xe5880018, 0xea000003, 0xe7d42000, 0xe0883000, 0xe2800001, 
    0xe5c32018, 0xe1510000, 0x8afffff9, 0xe3560008, 0xe0844000, 0xa3a00000, 0xba000006, 0xe0882000, 
    0xe7d41000, 0xe2800001, 0xe3500004, 0x22844004, 0xe5c2101c, 0x3afffff8, 0xe0455006, 0xe3550000, 
    0xd5980000, 0xd3c00401, 0xd5880000, 0xe59f0104, 0xe0800009, 0xebfffe10, 0xe3550000, 0xcaffffe0, 
    0xe8bd41f0, 0xe1a00000, 0xe92d401c, 0xe28d1004, 0xe1a0000d, 0xebfffeee, 0xebfffdc2, 0xe3500001, 
    0xe5dd0000, 0x05dd1004, 0x01800001, 0xe3100001, 0x1afffff5, 0xe8bd801c, 0xe92d4010, 0xe1a04000, 
    0xebfffeff, 0xe59f10ac, 0xe0811009, 0xe5910000, 0xe3c000c3, 0xe3c02703, 0xe3c22bfe, 0xe3820b01, 
    0xe2802702, 0xe3c2067f, 0xe5810000, 0xe3a00011, 0xe5c10004, 0xe2810000, 0xe5c1400c, 0xebfffdee, 
    0xe8bd4010, 0xeaffffdf, 0xe92d4070, 0xe1a06000, 0xe59f4060, 0xe1a05001, 0xe0844009, 0xe5940000, 
    0xe3c00003, 0xe3c008ff, 0xe3c00cfb, 0xe3800b01, 0xe2802502, 0xe3c22401, 0xe3820406, 0xe3a02000, 
    0xe5840000, 0xe3a00015, 0xe5c40004, 0xe2840000, 0xe5842018, 0xe584201c, 0xe5842010, 0xe5842014, 
    0xebfffdd5, 0xe5d40010, 0xe5c60000, 0xe5d40011, 0xe5c50000, 0xe8bd8070, 0x00000004, 0x00000000, 
};

static const program_target_t flash = {
    0x20020020, // Init
    0x20020060, // UnInit
    0x20020074, // EraseChip
    0x20020084, // EraseSector
    0x20020094, // ProgramPage

    // RSB : base address is address of Execution Region PrgData in map file
    //       to access global/static data
    // RSP : Initial stack pointer
    {RAM_START, (RAM_START + sizeof(GR_LYCHEE_FLM)), RAM_START + 0x00010000}, // {breakpoint, RSB, RSP}

    RAM_START + 0x00004000, // program_buffer
    RAM_START,              // algo_start
    sizeof(GR_LYCHEE_FLM),  // algo_size
    GR_LYCHEE_FLM,          // image

    256          // ram_to_flash_bytes_to_be_written
};
